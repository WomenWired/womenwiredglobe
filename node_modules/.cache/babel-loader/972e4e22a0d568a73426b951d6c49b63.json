{"ast":null,"code":"var _jsxFileName = \"/Users/kayajones/codingprojects/git/womenwiredglobe/src/components/Globe.js\";\nimport React from \"react\";\nimport ReactGlobe from \"react-globe\";\nimport ArticleCard from \"./ArticleCard\";\nimport ReactWordCloud from \"react-wordcloud\";\nimport { Button } from \"@material-ui/core/\"; //Despite the fact that this syntax is 'correct' according to the documentation, for some reason, only passing the link directly works.\n//const globeTextureUrl = 'https://raw.githubusercontent.com/chrisrzhou/react-globe/master/textures/globe_dark.jpg'\n\nconst backgroundImage = \"./assets/virus_green.jpg\";\n\nfunction flatten(ary, ret = []) {\n  return ary.reduce((ret, entry) => {\n    if (Array.isArray(entry)) {\n      flatten(entry, ret);\n    } else {\n      ret.push(entry);\n    }\n\n    return ret;\n  }, ret);\n}\n\nfunction wordFrequency(txt) {\n  var wordArray = txt.split(/[ .?!,*'\"]/);\n  var newArray = [],\n      wordObj;\n  wordArray.forEach(function (word) {\n    wordObj = newArray.filter(function (w) {\n      return w.text == word;\n    });\n\n    if (wordObj.length) {\n      wordObj[0].value += 1;\n    } else {\n      newArray.push({\n        text: word,\n        value: 1\n      });\n    }\n  });\n  let filteredArray = newArray.filter(wo => {\n    if (wo.text !== \"the\" && wo.text !== \"and\" && wo.text !== \"a\" && wo.text !== \"of\" && wo.text !== \"is\" && wo.text !== \"to\" && wo.text !== \"in\") {\n      return wo;\n    }\n  });\n  return filteredArray;\n}\n\nconst articlesPlacementInLayout = {\n  width: \"100%\" //overflow: 'scroll' //It's a full amount of the 60% that's given to the globe.\n\n};\nconst articleStyle = {\n  single: {\n    padding: \"8px\",\n    margin: \"8px\",\n    backgroundColor: \"#FFF07C\",\n    float: \"left\",\n    display: \"inline\",\n    maxWidth: \"40%\",\n    height: \"160px\",\n    fontFamily: \"sans-serif\",\n    borderRadius: 4\n  },\n  headline: {\n    fontSize: \"16px\",\n    marginBottom: \"8px\"\n  },\n  paragraph: {\n    fontSize: 12\n  },\n  details: {\n    fontSize: 10,\n    marginBottom: \"8px\"\n  }\n}; //Function that fetches the marker data, marker by marker, and formats it to be ready for rendering.\n\nconst ArticleComponent = ({\n  marker\n}) => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: articleStyle.single,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: articleStyle.headline,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, marker.headline), /*#__PURE__*/React.createElement(\"div\", {\n    style: articleStyle.details,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }), marker.occupation, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }), marker.outlet, \" \", marker.date), /*#__PURE__*/React.createElement(\"div\", {\n    style: articleStyle.paragraph,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, marker.paragraph));\n}; //Modified version react-globe's default markerOptions\n\n\nconst customMarkerOpts = {\n  activeScale: 1.3,\n  enableGlow: true,\n  enableTooltip: true,\n  enterAnimationDuration: 1000,\n  enterEasingFunction: [\"Linear\", \"None\"],\n  exitAnimationDuration: 500,\n  exitEasingFunction: [\"Cubic\", \"Out\"],\n  getTooltipContent: marker => helperOnHover(marker),\n  glowCoefficient: 0,\n  glowPower: 3,\n  glowRadiusScale: 2,\n  radiusScaleRange: [0.005, 0.02] //type: MarkerType.Dot,\n\n};\nconst customGlobeOps = {\n  enableBackground: false,\n  texture: \"https://raw.githubusercontent.com/chrisrzhou/react-globe/master/textures/globe_dark.jpg\",\n  //`${globeTextureUrl}`,\n  enableClouds: false,\n  backgroundTexture: `${backgroundImage}`\n}; //Determines what's shown when hovering on marker. Passed to Globe's markerOptions through customMarkerOpts.\n//const helperOnHover = (marker) => `\"${marker.headline}\" - ${marker.city}`\n\nconst helperOnHover = marker => `${marker.city} (${marker.code})`; //When cards are displayed, this appears and enables closing them.\n\n\nconst closeCards = (e, setDetails) => {\n  e.preventDefault();\n  setDetails(null);\n};\n\nconst Globe = ({\n  setEvent,\n  setDetails,\n  markers\n}) => {\n  /*\n        {markers.map(\n          marker =>\n          <ReactWordCloud key={marker.id} words={marker.headline.split(/\\W+/).map(w => {return {'text': w, 'value': 2 }})}/>\n        )}\n  \n        <ReactWordCloud words={flatten(markers.map(m => m.headline).map(h => h.split(/\\W+/))).map(w => {return {'text': w, 'value': Math.floor((Math.random() * 10) + 1) }})}/>\n  \n        */\n  //<ArticleCard key={marker.id} marker={marker}/>\n  //\"Container\" that fetches the articles from the markers and pushes them to readable format as news cards\n  const helperDisplayArticle = (markers, setDetails) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: articlesPlacementInLayout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      style: {\n        position: \"fixed\",\n        top: \"2%\",\n        right: \"2%\",\n        color: \"white\",\n        zIndex: \"100\",\n        backgroundColor: \"#222222\"\n      },\n      onClick: e => closeCards(e, setDetails),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }, \"Back to Map\"), /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        color: \"#ffffff\",\n        textAlign: \"center\",\n        width: \"80%\",\n        fontFamily: \"sans-serif\",\n        marginLeft: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(ReactWordCloud, {\n      options: {\n        fontSizes: [20, 60],\n        fontFamily: \"sans-serif\",\n        margin: \"8px\",\n        rotations: 0,\n        rotationAngles: [0, 0],\n        enableTooltip: false,\n        colors: [\"#fafafa\", \"yellow\", \"green\", \"pink\", \"yellow\", \"green\", \"pink\", \"orange\"]\n      },\n      words: flatten(wordFrequency(markers.map(m => m.headline.toLowerCase()).join(\" \"))).filter(wo => wo.value > 0).map(wo => {\n        return {\n          text: wo.text,\n          value: wo.value * 100\n        };\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }\n    }), markers.map(marker => /*#__PURE__*/React.createElement(ArticleComponent, {\n      key: marker.id,\n      marker: marker,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    })));\n  }; //Zoom in animation\n\n\n  const onClickMarker = (marker, markerObject, event) => {\n    setEvent({\n      type: \"CLICK\",\n      marker,\n      markerObjectID: markerObject.uuid,\n      pointerEventPosition: {\n        x: event.clientX,\n        y: event.clientY\n      }\n    });\n    setDetails(helperDisplayArticle(markers.filter(m => m.city === marker.city), setDetails));\n  }; //Zoom out animation\n\n\n  const onDefocus = (previousCoordinates, event) => {\n    setEvent({\n      type: \"DEFOCUS\",\n      previousCoordinates,\n      pointerEventPosition: {\n        x: event.clientX,\n        y: event.clientY\n      }\n    });\n    setDetails(null);\n  };\n\n  return /*#__PURE__*/React.createElement(ReactGlobe, {\n    markers: markers,\n    markerOptions: customMarkerOpts,\n    onClickMarker: onClickMarker,\n    onDefocus: onDefocus,\n    globeOptions: customGlobeOps,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default Globe;","map":{"version":3,"sources":["/Users/kayajones/codingprojects/git/womenwiredglobe/src/components/Globe.js"],"names":["React","ReactGlobe","ArticleCard","ReactWordCloud","Button","backgroundImage","flatten","ary","ret","reduce","entry","Array","isArray","push","wordFrequency","txt","wordArray","split","newArray","wordObj","forEach","word","filter","w","text","length","value","filteredArray","wo","articlesPlacementInLayout","width","articleStyle","single","padding","margin","backgroundColor","float","display","maxWidth","height","fontFamily","borderRadius","headline","fontSize","marginBottom","paragraph","details","ArticleComponent","marker","occupation","outlet","date","customMarkerOpts","activeScale","enableGlow","enableTooltip","enterAnimationDuration","enterEasingFunction","exitAnimationDuration","exitEasingFunction","getTooltipContent","helperOnHover","glowCoefficient","glowPower","glowRadiusScale","radiusScaleRange","customGlobeOps","enableBackground","texture","enableClouds","backgroundTexture","city","code","closeCards","e","setDetails","preventDefault","Globe","setEvent","markers","helperDisplayArticle","position","top","right","color","zIndex","textAlign","marginLeft","fontSizes","rotations","rotationAngles","colors","map","m","toLowerCase","join","id","onClickMarker","markerObject","event","type","markerObjectID","uuid","pointerEventPosition","x","clientX","y","clientY","onDefocus","previousCoordinates"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactGlobe from \"react-globe\";\nimport ArticleCard from \"./ArticleCard\";\nimport ReactWordCloud from \"react-wordcloud\";\nimport { Button } from \"@material-ui/core/\";\n\n//Despite the fact that this syntax is 'correct' according to the documentation, for some reason, only passing the link directly works.\n//const globeTextureUrl = 'https://raw.githubusercontent.com/chrisrzhou/react-globe/master/textures/globe_dark.jpg'\nconst backgroundImage = \"./assets/virus_green.jpg\";\n\nfunction flatten(ary, ret = []) {\n  return ary.reduce((ret, entry) => {\n    if (Array.isArray(entry)) {\n      flatten(entry, ret);\n    } else {\n      ret.push(entry);\n    }\n    return ret;\n  }, ret);\n}\n\nfunction wordFrequency(txt) {\n  var wordArray = txt.split(/[ .?!,*'\"]/);\n  var newArray = [],\n    wordObj;\n  wordArray.forEach(function(word) {\n    wordObj = newArray.filter(function(w) {\n      return w.text == word;\n    });\n    if (wordObj.length) {\n      wordObj[0].value += 1;\n    } else {\n      newArray.push({ text: word, value: 1 });\n    }\n  });\n  let filteredArray = newArray.filter(wo => {\n    if (\n      wo.text !== \"the\" &&\n      wo.text !== \"and\" &&\n      wo.text !== \"a\" &&\n      wo.text !== \"of\" &&\n      wo.text !== \"is\" &&\n      wo.text !== \"to\" &&\n      wo.text !== \"in\"\n    ) {\n      return wo;\n    }\n  });\n  return filteredArray;\n}\n\nconst articlesPlacementInLayout = {\n  width: \"100%\"\n  //overflow: 'scroll' //It's a full amount of the 60% that's given to the globe.\n};\n\nconst articleStyle = {\n  single: {\n    padding: \"8px\",\n    margin: \"8px\",\n    backgroundColor: \"#FFF07C\",\n    float: \"left\",\n    display: \"inline\",\n    maxWidth: \"40%\",\n    height: \"160px\",\n    fontFamily: \"sans-serif\",\n    borderRadius: 4\n  },\n  headline: {\n    fontSize: \"16px\",\n    marginBottom: \"8px\"\n  },\n  paragraph: {\n    fontSize: 12\n  },\n  details: {\n    fontSize: 10,\n    marginBottom: \"8px\"\n  }\n};\n\n//Function that fetches the marker data, marker by marker, and formats it to be ready for rendering.\n\nconst ArticleComponent = ({ marker }) => {\n  return (\n    <div style={articleStyle.single}>\n      <div style={articleStyle.headline}>{marker.headline}</div>\n      <div style={articleStyle.details}>\n        <br />\n        {marker.occupation}\n        <br/>\n         {marker.outlet} {marker.date}\n      </div>\n      <div style={articleStyle.paragraph}>{marker.paragraph}</div>\n    </div>\n  );\n};\n\n\n//Modified version react-globe's default markerOptions\nconst customMarkerOpts = {\n  activeScale: 1.3,\n  enableGlow: true,\n  enableTooltip: true,\n  enterAnimationDuration: 1000,\n  enterEasingFunction: [\"Linear\", \"None\"],\n  exitAnimationDuration: 500,\n  exitEasingFunction: [\"Cubic\", \"Out\"],\n  getTooltipContent: marker => helperOnHover(marker),\n  glowCoefficient: 0,\n  glowPower: 3,\n  glowRadiusScale: 2,\n  radiusScaleRange: [0.005, 0.02]\n  //type: MarkerType.Dot,\n};\n\nconst customGlobeOps = {\n  enableBackground: false,\n  texture:\n    \"https://raw.githubusercontent.com/chrisrzhou/react-globe/master/textures/globe_dark.jpg\", //`${globeTextureUrl}`,\n  enableClouds: false,\n  backgroundTexture: `${backgroundImage}`\n};\n\n//Determines what's shown when hovering on marker. Passed to Globe's markerOptions through customMarkerOpts.\n//const helperOnHover = (marker) => `\"${marker.headline}\" - ${marker.city}`\n\nconst helperOnHover = marker => `${marker.city} (${marker.code})`;\n\n//When cards are displayed, this appears and enables closing them.\nconst closeCards = (e, setDetails) => {\n  e.preventDefault();\n  setDetails(null);\n};\n\nconst Globe = ({ setEvent, setDetails, markers }) => {\n  /*\n        {markers.map(\n          marker =>\n          <ReactWordCloud key={marker.id} words={marker.headline.split(/\\W+/).map(w => {return {'text': w, 'value': 2 }})}/>\n        )}\n  \n        <ReactWordCloud words={flatten(markers.map(m => m.headline).map(h => h.split(/\\W+/))).map(w => {return {'text': w, 'value': Math.floor((Math.random() * 10) + 1) }})}/>\n  \n        */\n\n  //<ArticleCard key={marker.id} marker={marker}/>\n  //\"Container\" that fetches the articles from the markers and pushes them to readable format as news cards\n  const helperDisplayArticle = (markers, setDetails) => {\n    return (\n      <div style={articlesPlacementInLayout}>\n        <Button\n          style={{\n            position: \"fixed\",\n            top: \"2%\",\n            right: \"2%\",\n            color: \"white\",\n            zIndex: \"100\",\n            backgroundColor: \"#222222\"\n          }}\n          onClick={e => closeCards(e, setDetails)}\n        >\n          Back to Map\n        </Button>\n\n        <h3\n          style={{\n            color: \"#ffffff\",\n            textAlign: \"center\",\n            width: \"80%\",\n            fontFamily: \"sans-serif\",\n            marginLeft: \"20px\"\n          }}\n        >\n          \n        </h3>\n        <ReactWordCloud\n          options={{\n            fontSizes: [20, 60],\n            fontFamily: \"sans-serif\",\n            margin: \"8px\",\n            rotations: 0,\n            rotationAngles: [0, 0],\n            enableTooltip: false,\n            colors: [\n              \"#fafafa\",\n              \"yellow\",\n              \"green\",\n              \"pink\",\n              \"yellow\",\n              \"green\",\n              \"pink\",\n              \"orange\"\n            ]\n          }}\n          words={flatten(\n            wordFrequency(markers.map(m => m.headline.toLowerCase()).join(\" \"))\n          )\n            .filter(wo => wo.value > 0)\n            .map(wo => {\n              return { text: wo.text, value: wo.value * 100 };\n            })}\n        />\n\n        {markers.map(marker => (\n          <ArticleComponent key={marker.id} marker={marker} />\n        ))}\n      </div>\n    );\n  };\n\n  //Zoom in animation\n  const onClickMarker = (marker, markerObject, event) => {\n    setEvent({\n      type: \"CLICK\",\n      marker,\n      markerObjectID: markerObject.uuid,\n      pointerEventPosition: { x: event.clientX, y: event.clientY }\n    });\n    setDetails(\n      helperDisplayArticle(\n        markers.filter(m => m.city === marker.city),\n        setDetails\n      )\n    );\n  };\n\n  //Zoom out animation\n  const onDefocus = (previousCoordinates, event) => {\n    setEvent({\n      type: \"DEFOCUS\",\n      previousCoordinates,\n      pointerEventPosition: { x: event.clientX, y: event.clientY }\n    });\n    setDetails(null);\n  };\n\n  return (\n    <ReactGlobe\n      markers={markers}\n      markerOptions={customMarkerOpts}\n      onClickMarker={onClickMarker}\n      onDefocus={onDefocus}\n      globeOptions={customGlobeOps}\n    />\n  );\n};\n\nexport default Globe;\n"]},"metadata":{},"sourceType":"module"}